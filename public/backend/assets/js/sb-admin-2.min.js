/*!
 * Start Bootstrap - SB Admin 2 v4.1.3 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2021 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

!(function (l) {
    "use strict";
    l("#sidebarToggle, #sidebarToggleTop").on("click", function (e) {
        l("body").toggleClass("sidebar-toggled"),
            l(".sidebar").toggleClass("toggled"),
            l(".sidebar").hasClass("toggled") &&
                l(".sidebar .collapse").collapse("hide");
    }),
        l(window).resize(function () {
            l(window).width() < 768 && l(".sidebar .collapse").collapse("hide"),
                l(window).width() < 480 &&
                    !l(".sidebar").hasClass("toggled") &&
                    (l("body").addClass("sidebar-toggled"),
                    l(".sidebar").addClass("toggled"),
                    l(".sidebar .collapse").collapse("hide"));
        }),
        l("body.fixed-nav .sidebar").on(
            "mousewheel DOMMouseScroll wheel",
            function (e) {
                var o;
                768 < l(window).width() &&
                    ((o = (o = e.originalEvent).wheelDelta || -o.detail),
                    (this.scrollTop += 30 * (o < 0 ? 1 : -1)),
                    e.preventDefault());
            }
        ),
        l(document).on("scroll", function () {
            100 < l(this).scrollTop()
                ? l(".scroll-to-top").fadeIn()
                : l(".scroll-to-top").fadeOut();
        }),
        l(document).on("click", "a.scroll-to-top", function (e) {
            var o = l(this);
            l("html, body")
                .stop()
                .animate(
                    { scrollTop: l(o.attr("href")).offset().top },
                    1e3,
                    "easeInOutExpo"
                ),
                e.preventDefault();
        });
})(jQuery);

//lubna

const prevBtns = document.querySelectorAll(".btn-prev");
const nextBtns = document.querySelectorAll(".btn-next");
const progress = document.getElementById("progress");
const formSteps = document.querySelectorAll(".form-step");
const progressSteps = document.querySelectorAll(".progress-step");

let formStepsNum = 0;

nextBtns.forEach((btn) => {
    btn.addEventListener("click", () => {
        formStepsNum++;
        updateFormSteps();
        updateProgressbar();
    });
});

prevBtns.forEach((btn) => {
    btn.addEventListener("click", () => {
        formStepsNum--;
        updateFormSteps();
        updateProgressbar();
    });
});

function updateFormSteps() {
    formSteps.forEach((formStep) => {
        formStep.classList.contains("form-step-active") &&
            formStep.classList.remove("form-step-active");
    });

    formSteps[formStepsNum].classList.add("form-step-active");
}

function updateProgressbar() {
    progressSteps.forEach((progressStep, idx) => {
        if (idx < formStepsNum + 1) {
            progressStep.classList.add("progress-step-active");
        } else {
            progressStep.classList.remove("progress-step-active");
        }
    });

    const progressActive = document.querySelectorAll(".progress-step-active");

    progress.style.width =
        ((progressActive.length - 1) / (progressSteps.length - 1)) * 100 + "%";
}
function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
            $(".image-upload-wrap").hide();

            $(".file-upload-image").attr("src", e.target.result);
            $(".file-upload-content").show();

            $(".image-title").html(input.files[0].name);
        };

        reader.readAsDataURL(input.files[0]);
    } else {
        removeUpload();
    }
}

function removeUpload() {
    $(".file-upload-input").replaceWith($(".file-upload-input").clone());
    $(".file-upload-content").hide();
    $(".image-upload-wrap").show();
}
$(".image-upload-wrap").bind("dragover", function () {
    $(".image-upload-wrap").addClass("image-dropping");
});
$(".image-upload-wrap").bind("dragleave", function () {
    $(".image-upload-wrap").removeClass("image-dropping");
});

function readURLPamflet(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
            $(".image-upload-wrap-pamflet").hide();

            $(".file-upload-image-pamflet").attr("src", e.target.result);
            $(".file-upload-content-pamflet").show();

            $(".image-title-pamflet").html(input.files[0].name);
        };

        reader.readAsDataURL(input.files[0]);
    } else {
        removeUpload();
    }
}

function removeUploadPamflet() {
    $(".file-upload-input-pamflet").replaceWith(
        $(".file-upload-input-pamflet").clone()
    );
    $(".file-upload-content-pamflet").hide();
    $(".image-upload-wrap-pamflet").show();
}
$(".image-upload-wrap-pamflet").bind("dragover", function () {
    $(".image-upload-wrap-pamflet").addClass("image-dropping");
});
$(".image-upload-wrap-pamflet").bind("dragleave", function () {
    $(".image-upload-wrap-pamflet").removeClass("image-dropping");
});

// Function to download SVG
function downloadSVG() {
    var svg = document.getElementById("container").querySelector("svg");
    var svgData = new XMLSerializer().serializeToString(svg);
    var blob = new Blob([svgData], {
        type: "image/svg+xml;charset=utf-8",
    });
    var url = URL.createObjectURL(blob);
    var a = document.createElement("a");
    a.download = "qrcode.svg";
    a.href = url;
    a.click();
}
